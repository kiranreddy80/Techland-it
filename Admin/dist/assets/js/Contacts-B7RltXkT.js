import{j as e}from"./icons-vendor-6kYSYytV.js";import{r as i}from"./react-vendor-D27a9yTA.js";import{a as m}from"./index-Dn-_BGsr.js";import{y as l}from"./utils-CVcC53YC.js";import"./animation-vendor-wr8mJRns.js";function C(){const[n,o]=i.useState([]),[d,p]=i.useState(!0),[a,c]=i.useState(1),r=7,j=async()=>{try{const{data:t}=await m.get("/contact");o(t)}catch(t){console.error("Error fetching contacts:",t),l.error("Failed to load messages")}finally{p(!1)}};i.useEffect(()=>{j()},[]);const g=async t=>{if(confirm("Are you sure you want to delete this message?"))try{await m.delete(`/contact/${t}`),o(n.filter(s=>s._id!==t)),l.success("Message deleted")}catch(s){console.error("Error deleting message:",s),l.error("Failed to delete message")}},u=t=>{const s={year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(t).toLocaleDateString(void 0,s)},h=a*r,b=h-r,f=n.slice(b,h),x=Math.ceil(n.length/r),y=t=>c(t);return e.jsxs("div",{className:"dashboard-container",children:[e.jsx("h1",{className:"admin-title",children:"Inquiries & Messages"}),e.jsx("p",{className:"admin-subtitle",children:"Manage incoming contact requests from the website."}),e.jsxs("div",{className:"panel",style:{marginTop:"20px"},children:[e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"custom-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Date"}),e.jsx("th",{children:"Sender Details"}),e.jsx("th",{children:"Subject"}),e.jsx("th",{children:"Message"}),e.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),e.jsx("tbody",{children:d?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"40px"},children:"Loading messages..."})}):n.length>0?f.map(t=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontSize:"12px",color:"#6b7280",width:"150px"},children:u(t.createdAt)}),e.jsxs("td",{children:[e.jsx("strong",{children:t.name}),e.jsx("br",{}),e.jsx("span",{style:{fontSize:"13px",color:"#163198"},children:t.email}),e.jsx("br",{}),e.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:t.phone})]}),e.jsx("td",{style:{fontWeight:"600",color:"#1b1b1b"},children:t.subject||"General Inquiry"}),e.jsx("td",{children:e.jsx("div",{style:{maxWidth:"300px",fontSize:"14px",color:"#4b5563",whiteSpace:"pre-wrap"},children:t.message})}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:e.jsx("button",{className:"delete-btn-icon",onClick:()=>g(t._id),title:"Delete Message",children:"ðŸ—‘ï¸"})})})]},t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"40px",color:"#6b7280"},children:"No messages received yet."})})})]})}),!d&&n.length>r&&e.jsxs("div",{className:"pagination-container",children:[e.jsx("button",{disabled:a===1,onClick:()=>c(t=>t-1),className:"pagination-btn arrow",children:"â† Prev"}),e.jsx("div",{className:"page-numbers",children:[...Array(x)].map((t,s)=>e.jsx("button",{onClick:()=>y(s+1),className:`pagination-btn ${a===s+1?"active":""}`,children:s+1},s+1))}),e.jsx("button",{disabled:a===x,onClick:()=>c(t=>t+1),className:"pagination-btn arrow",children:"Next â†’"})]})]})]})}export{C as default};
