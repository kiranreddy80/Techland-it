import{j as e}from"./icons-vendor-6kYSYytV.js";import{r as l}from"./react-vendor-D27a9yTA.js";import{c as C,a as c}from"./index-BzpWUTwk.js";import{y as r}from"./utils-CVcC53YC.js";import"./animation-vendor-wr8mJRns.js";function R(){const[n,d]=l.useState([]),[y,i]=l.useState(!1),[a,o]=l.useState({name:"",role:"",photo:null}),[m,h]=l.useState(""),b=C.ASSETS_URL,[p,x]=l.useState(!1),u=async()=>{try{const{data:t}=await c.get("/team");d(t)}catch(t){console.error("Error fetching team:",t),r.error("Failed to load team members")}};l.useEffect(()=>{u()},[]);const v=()=>{o({name:"",role:"",photo:null}),h(""),i(!0)},N=async t=>{var j,f;t.preventDefault(),x(!0);const s=new FormData;s.append("name",a.name),s.append("role",a.role),a.photo&&s.append("image",a.photo);try{await c.post("/team",s,{headers:{"Content-Type":"multipart/form-data"}}),r.success("Team member added successfully"),u(),i(!1)}catch(g){console.error("Error adding member:",g);const A=((f=(j=g.response)==null?void 0:j.data)==null?void 0:f.message)||"Failed to add team member";r.error(A)}finally{x(!1)}},w=async t=>{try{await c.patch(`/team/${t}/toggle`),d(n.map(s=>s._id===t?{...s,isActive:!s.isActive}:s)),r.success("Status updated")}catch(s){console.error("Error toggling status:",s),r.error("Failed to update status")}},S=async t=>{if(confirm("Are you sure you want to remove this member?"))try{await c.delete(`/team/${t}`),d(n.filter(s=>s._id!==t)),r.success("Member removed")}catch(s){console.error("Error deleting member:",s),r.error("Failed to delete member")}};return e.jsxs("div",{className:"dashboard-container",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[e.jsxs("div",{children:[e.jsx("h1",{className:"admin-title",children:"Team Members"}),e.jsx("p",{className:"admin-subtitle",children:"Manage your team structure and roles."})]}),e.jsx("button",{className:"quick-action-btn primary",style:{width:"auto"},onClick:v,children:"+ Add New Member"})]}),e.jsx("div",{className:"panel",children:e.jsx("div",{className:"table-container",children:e.jsxs("table",{className:"custom-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Profile"}),e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Role"}),e.jsx("th",{children:"Status"}),e.jsx("th",{style:{textAlign:"right"},children:"Actions"})]})}),e.jsxs("tbody",{children:[n.map(t=>e.jsxs("tr",{style:{opacity:t.isActive?1:.6},children:[e.jsx("td",{children:e.jsx("img",{src:t.image.startsWith("http")?t.image:`${b}${t.image}`,alt:"",className:"avatar-preview"})}),e.jsx("td",{children:e.jsx("strong",{children:t.name})}),e.jsx("td",{children:t.role}),e.jsx("td",{children:e.jsxs("label",{className:"switch",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:()=>w(t._id)}),e.jsx("span",{className:"slider"})]})}),e.jsx("td",{children:e.jsx("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:e.jsx("button",{className:"delete-btn-icon",onClick:()=>S(t._id),children:"ðŸ—‘ï¸"})})})]},t._id)),n.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"20px"},children:"No team members found."})})]})]})})}),y&&e.jsx("div",{className:"modal-overlay",onClick:t=>{t.target===t.currentTarget&&i(!1)},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h2",{children:"Add New Member"}),e.jsx("button",{className:"close-btn",onClick:()=>i(!1),children:"Ã—"})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Full Name"}),e.jsx("input",{type:"text",className:"form-input",value:a.name,onChange:t=>o({...a,name:t.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Role"}),e.jsx("input",{type:"text",className:"form-input",value:a.role,onChange:t=>o({...a,role:t.target.value}),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Profile Photo"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginTop:"5px"},children:[e.jsx("label",{htmlFor:"photo-upload",className:"table-action-btn",style:{cursor:"pointer",background:"#f3f4f6"},children:"ðŸ“‚ Choose File"}),e.jsx("span",{style:{fontSize:"12px",color:"#6b7280"},children:a.photo?a.photo.name:"No file chosen"})]}),e.jsx("input",{id:"photo-upload",type:"file",accept:"image/*",style:{display:"none"},onChange:t=>{const s=t.target.files[0];s&&(o({...a,photo:s}),h(URL.createObjectURL(s)))},required:!0})]}),m&&e.jsx("div",{style:{display:"flex",justifyContent:"center",margin:"20px 0"},children:e.jsx("img",{src:m,alt:"Preview",className:"avatar-preview",style:{width:"100px",height:"100px"}})}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:p,children:p?"Adding...":"Add Member"})]})]})})]})}export{R as default};
